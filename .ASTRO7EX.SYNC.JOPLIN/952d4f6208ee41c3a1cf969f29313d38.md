id: 952d4f6208ee41c3a1cf969f29313d38
parent_id: 
item_type: 1
item_id: dd58771c79734264be96966f9766c3af
item_updated_time: 1764126863859
title_diff: "[{\"diffs\":[[1,\"üìö Knowledgebase Entry ‚Äî Script ERD for TV/Anime Series\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":55}]"
body_diff: "[{\"diffs\":[[1,\"\\\n# üìö Knowledgebase Entry ‚Äî Script ERD for TV/Anime Series\\\n\\\n## Table of Contents\\\n1. [Overview](#overview)\\\n2. [Core Concept](#core-concept)\\\n3. [Entities & Relationships](#entities--relationships)\\\n   - [Show Structure](#show-structure)\\\n   - [Script Structure](#script-structure)\\\n   - [Context Entities](#context-entities)\\\n4. [ERD Diagram (Mermaid)](#erd-diagram-mermaid)\\\n5. [Data Structures (SQL-Level)](#data-structures-sql-level)\\\n   - [Series / Season / Episode](#series--season--episode)\\\n   - [Script Versions & Scenes](#script-versions--scenes)\\\n   - [Beats & Lines](#beats--lines)\\\n   - [Characters, Locations, Tags](#characters-locations-tags)\\\n6. [Alternative: Node-Based Class Structure](#alternative-node-based-class-structure)\\\n7. [Mental Model](#mental-model)\\\n8. [Example: Neon Genesis Evangelion vs Generation Kill](#example-neon-genesis-evangelion-vs-generation-kill)\\\n\\\n---\\\n\\\n## 1. Overview\\\n\\\nThis entry defines an **Entity‚ÄìRelationship Model (ERD)** and **data structures** for storing the scripts of every episode in one or more TV/anime series (e.g. *Neon Genesis Evangelion*, *Generation Kill*).\\\n\\\nThe goal:\\\n\\\n- Capture **every script draft** for **every episode**.\\\n- Track **scenes, beats, and individual lines**.\\\n- Attach **characters, locations, and tags** for analysis, search, and modeling.\\\n\\\n---\\\n\\\n## 2. Core Concept\\\n\\\nYou are modeling:\\\n\\\n- **Series ‚Üí Season ‚Üí Episode ‚Üí Script Version ‚Üí Scene ‚Üí Beat ‚Üí Line**\\\n\\\nPlus:\\\n\\\n- **Character**, **Location**, and **Tag** to contextualize and classify content.\\\n\\\nThis gives you design space for:\\\n\\\n- Version history of scripts.\\\n- Structural analysis (beats, motifs, themes).\\\n- Character and location tracking.\\\n- Cross-series comparative work (e.g. Evangelion vs Generation Kill).\\\n\\\n---\\\n\\\n## 3. Entities & Relationships\\\n\\\n### 3.1 Show Structure\\\n\\\n- **SERIES**\\\n  - One per show (e.g., *Neon Genesis Evangelion*, *Generation Kill*).\\\n  - Attributes:\\\n    - `id`\\\n    - `title`\\\n    - `type` (anime, miniseries, drama)\\\n    - `start_year`, `end_year`\\\n    - `description`\\\n\\\n- **SEASON**\\\n  - One per season.\\\n  - Relationship: `SERIES 1 ‚Äî n SEASON`\\\n  - Attributes:\\\n    - `id`\\\n    - `series_id` (FK ‚Üí SERIES)\\\n    - `season_number`\\\n    - `title`\\\n    - `release_year`\\\n\\\n- **EPISODE**\\\n  - One per episode.\\\n  - Relationship: `SEASON 1 ‚Äî n EPISODE`\\\n  - Attributes:\\\n    - `id`\\\n    - `season_id` (FK ‚Üí SEASON)\\\n    - `episode_number_in_season`\\\n    - `episode_number_overall`\\\n    - `title`\\\n    - `air_date`\\\n    - `logline`\\\n    - `runtime_minutes`\\\n\\\n---\\\n\\\n### 3.2 Script Structure\\\n\\\n- **SCRIPT_VERSION**\\\n  - Every draft/revision of an episode‚Äôs script.\\\n  - Relationship: `EPISODE 1 ‚Äî n SCRIPT_VERSION`\\\n  - Attributes:\\\n    - `id`\\\n    - `episode_id` (FK ‚Üí EPISODE)\\\n    - `version_label` (Outline, Draft 1, Shooting, etc.)\\\n    - `status` (draft, locked, archived)\\\n    - `author`\\\n    - `created_at`\\\n    - `notes`\\\n\\\n- **SCENE**\\\n  - A scene in a specific script version.\\\n  - Relationship: `SCRIPT_VERSION 1 ‚Äî n SCENE`\\\n  - Attributes:\\\n    - `id`\\\n    - `script_version_id` (FK ‚Üí SCRIPT_VERSION)\\\n    - `scene_number`\\\n    - `slugline` (e.g. `INT. NERV HQ ‚Äì NIGHT`)\\\n    - `summary`\\\n    - `location_id` (FK ‚Üí LOCATION)\\\n    - `page_start`, `page_end`\\\n    - `sequence_label` (A-plot, B-plot, etc.)\\\n\\\n- **BEAT** (optional but powerful)\\\n  - Micro-unit inside a scene.\\\n  - Relationship: `SCENE 1 ‚Äî n BEAT`\\\n  - Attributes:\\\n    - `id`\\\n    - `scene_id` (FK ‚Üí SCENE)\\\n    - `beat_number`\\\n    - `type` (setup, turn, payoff, etc.)\\\n    - `summary`\\\n\\\n- **LINE**\\\n  - Dialogue line, action line, parenthetical, or transition.\\\n  - Relationships:\\\n    - `SCENE 1 ‚Äî n LINE`\\\n    - `BEAT 1 ‚Äî n LINE` (optional refinement)\\\n    - `CHARACTER 1 ‚Äî n LINE` (who speaks)\\\n  - Attributes:\\\n    - `id`\\\n    - `scene_id` (FK ‚Üí SCENE)\\\n    - `beat_id` (FK ‚Üí BEAT, nullable)\\\n    - `character_id` (FK ‚Üí CHARACTER, nullable for action lines)\\\n    - `line_index` (order within scene/beat)\\\n    - `kind` (`dialogue`, `action`, `parenthetical`, `transition`)\\\n    - `text`\\\n    - `is_voice_over` (bool)\\\n    - `is_off_screen` (bool)\\\n\\\n---\\\n\\\n### 3.3 Context Entities\\\n\\\n- **CHARACTER**\\\n  - Relationship: `SERIES 1 ‚Äî n CHARACTER`\\\n  - Attributes:\\\n    - `id`\\\n    - `series_id` (FK ‚Üí SERIES)\\\n    - `name`\\\n    - `alias`\\\n    - `is_main_cast`\\\n    - `archetype`\\\n    - `description`\\\n\\\n- **LOCATION**\\\n  - Relationship: `SERIES 1 ‚Äî n LOCATION`\\\n  - Attributes:\\\n    - `id`\\\n    - `series_id` (FK ‚Üí SERIES)\\\n    - `name`\\\n    - `type` (ship, base, city, room, etc.)\\\n    - `description`\\\n\\\n- **TAG**\\\n  - Used for themes, motifs, arcs, or custom metadata.\\\n  - Attributes:\\\n    - `id`\\\n    - `name`\\\n    - `tag_type` (theme, motif, plotline, character_arc, etc.)\\\n    - `description`\\\n\\\n- **TAG_LINK**\\\n  - Polymorphic join table: attaches tags to arbitrary entities.\\\n  - Attributes:\\\n    - `tag_id` (FK ‚Üí TAG)\\\n    - `entity_type` (e.g. `EPISODE`, `SCENE`, `BEAT`, `LINE`)\\\n    - `entity_id` (the primary key of the target entity)\\\n  - Primary key: `(tag_id, entity_type, entity_id)`\\\n\\\n---\\\n\\\n## 4. ERD Diagram (Mermaid)\\\n\\\n```mermaid\\\nerDiagram\\\n    SERIES ||--o{ SEASON : has\\\n    SEASON ||--o{ EPISODE : has\\\n    EPISODE ||--o{ SCRIPT_VERSION : \\\"has drafts\\\"\\\n    SCRIPT_VERSION ||--o{ SCENE : contains\\\n    SCENE ||--o{ BEAT : contains\\\n    SCENE ||--o{ LINE : contains\\\n    BEAT ||--o{ LINE : refines\\\n\\\n    SERIES ||--o{ CHARACTER : features\\\n    SERIES ||--o{ LOCATION : uses\\\n\\\n    CHARACTER ||--o{ LINE : speaks\\\n    LOCATION ||--o{ SCENE : \\\"set in\\\"\\\n\\\n    TAG ||--o{ TAG_LINK : applies\\\n    TAG_LINK }o--|| SCENE : \\\"tag scene\\\"\\\n    TAG_LINK }o--|| BEAT : \\\"tag beat\\\"\\\n    TAG_LINK }o--|| LINE : \\\"tag line\\\"\\\n    TAG_LINK }o--|| EPISODE : \\\"tag episode\\\"\\\n````\\\n\\\n---\\\n\\\n## 5. Data Structures (SQL-Level)\\\n\\\n### 5.1 Series / Season / Episode\\\n\\\n```sql\\\nCREATE TABLE series (\\\n    id              SERIAL PRIMARY KEY,\\\n    title           VARCHAR(255) NOT NULL,\\\n    type            VARCHAR(50),        -- 'anime', 'miniseries', etc.\\\n    start_year      INT,\\\n    end_year        INT,\\\n    description     TEXT\\\n);\\\n\\\nCREATE TABLE season (\\\n    id              SERIAL PRIMARY KEY,\\\n    series_id       INT NOT NULL REFERENCES series(id),\\\n    season_number   INT NOT NULL,\\\n    title           VARCHAR(255),\\\n    release_year    INT\\\n);\\\n\\\nCREATE TABLE episode (\\\n    id                          SERIAL PRIMARY KEY,\\\n    season_id                   INT NOT NULL REFERENCES season(id),\\\n    episode_number_in_season    INT NOT NULL,\\\n    episode_number_overall      INT NOT NULL,\\\n    title                       VARCHAR(255) NOT NULL,\\\n    air_date                    DATE,\\\n    logline                     TEXT,\\\n    runtime_minutes             INT\\\n);\\\n```\\\n\\\n---\\\n\\\n### 5.2 Script Versions & Scenes\\\n\\\n```sql\\\nCREATE TABLE script_version (\\\n    id              SERIAL PRIMARY KEY,\\\n    episode_id      INT NOT NULL REFERENCES episode(id),\\\n    version_label   VARCHAR(50) NOT NULL,   -- 'Outline', 'Draft 1', 'Shooting'\\\n    status          VARCHAR(50),            -- 'draft', 'locked', 'archived'\\\n    author          VARCHAR(255),\\\n    created_at      TIMESTAMP NOT NULL DEFAULT NOW(),\\\n    notes           TEXT\\\n);\\\n\\\nCREATE TABLE location (\\\n    id              SERIAL PRIMARY KEY,\\\n    series_id       INT NOT NULL REFERENCES series(id),\\\n    name            VARCHAR(255) NOT NULL,\\\n    type            VARCHAR(50),            -- 'ship', 'room', 'city', etc.\\\n    description     TEXT\\\n);\\\n\\\nCREATE TABLE scene (\\\n    id                  SERIAL PRIMARY KEY,\\\n    script_version_id   INT NOT NULL REFERENCES script_version(id),\\\n    scene_number        INT NOT NULL,\\\n    slugline            VARCHAR(255) NOT NULL,\\\n    summary             TEXT,\\\n    location_id         INT REFERENCES location(id),\\\n    page_start          NUMERIC(4,1),\\\n    page_end            NUMERIC(4,1),\\\n    sequence_label      VARCHAR(50)          -- e.g. 'A', 'B', 'C-story'\\\n);\\\n```\\\n\\\n---\\\n\\\n### 5.3 Beats & Lines\\\n\\\n```sql\\\nCREATE TABLE beat (\\\n    id              SERIAL PRIMARY KEY,\\\n    scene_id        INT NOT NULL REFERENCES scene(id),\\\n    beat_number     INT NOT NULL,\\\n    type            VARCHAR(50),           -- 'setup', 'turn', 'payoff', etc.\\\n    summary         TEXT\\\n);\\\n\\\nCREATE TABLE character (\\\n    id              SERIAL PRIMARY KEY,\\\n    series_id       INT NOT NULL REFERENCES series(id),\\\n    name            VARCHAR(255) NOT NULL,\\\n    alias           VARCHAR(255),\\\n    is_main_cast    BOOLEAN NOT NULL DEFAULT FALSE,\\\n    archetype       VARCHAR(100),\\\n    description     TEXT\\\n);\\\n\\\nCREATE TABLE line (\\\n    id              SERIAL PRIMARY KEY,\\\n    scene_id        INT NOT NULL REFERENCES scene(id),\\\n    beat_id         INT REFERENCES beat(id),\\\n    character_id    INT REFERENCES character(id),\\\n    line_index      INT NOT NULL,\\\n    kind            VARCHAR(20) NOT NULL,  -- 'dialogue','action','parenthetical','transition'\\\n    text            TEXT NOT NULL,\\\n    is_voice_over   BOOLEAN NOT NULL DEFAULT FALSE,\\\n    is_off_screen   BOOLEAN NOT NULL DEFAULT FALSE\\\n);\\\n```\\\n\\\n---\\\n\\\n### 5.4 Characters, Locations, Tags\\\n\\\n```sql\\\nCREATE TABLE tag (\\\n    id              SERIAL PRIMARY KEY,\\\n    name            VARCHAR(100) NOT NULL,\\\n    tag_type        VARCHAR(50),\\\n    description     TEXT\\\n);\\\n\\\nCREATE TABLE tag_link (\\\n    tag_id          INT NOT NULL REFERENCES tag(id),\\\n    entity_type     VARCHAR(50) NOT NULL,   -- 'EPISODE','SCENE','BEAT','LINE', etc.\\\n    entity_id       INT NOT NULL,\\\n    PRIMARY KEY (tag_id, entity_type, entity_id)\\\n);\\\n```\\\n\\\n---\\\n\\\n## 6. Alternative: Node-Based Class Structure\\\n\\\nYou can collapse **Scene / Beat / Line** into a single **ScriptElement** table/class and treat it like a tree.\\\n\\\n**Conceptual hierarchy:**\\\n\\\n* `ScriptElement` (abstract)\\\n\\\n  * `element_type`: `\\\"scene\\\" | \\\"beat\\\" | \\\"dialogue\\\" | \\\"action\\\"`\\\n  * `parent_id`: `NULL` for scenes, otherwise the containing node.\\\n  * `order_index`: position among siblings.\\\n  * Optional fields depending on type.\\\n\\\n**Python-style dataclass:**\\\n\\\n```python\\\nfrom dataclasses import dataclass\\\nfrom typing import Optional, Literal\\\n\\\nScriptElementType = Literal[\\\"scene\\\", \\\"beat\\\", \\\"dialogue\\\", \\\"action\\\"]\\\n\\\n@dataclass\\\nclass ScriptElement:\\\n    id: int\\\n    script_version_id: int\\\n    parent_id: Optional[int]   # None for top-level scenes\\\n    order_index: int\\\n    element_type: ScriptElementType\\\n\\\n    # Optional content fields; enforced by element_type at app level\\\n    slugline: Optional[str] = None          # scenes\\\n    summary: Optional[str] = None           # scenes/beats\\\n    text: Optional[str] = None              # dialogue/action\\\n    character_id: Optional[int] = None      # dialogue\\\n    is_voice_over: bool = False\\\n    is_off_screen: bool = False\\\n```\\\n\\\nYou‚Äôd then enforce:\\\n\\\n* `scene` ‚Üí requires `slugline`.\\\n* `dialogue` ‚Üí requires `text` + `character_id`.\\\n* `action` ‚Üí requires `text`.\\\n\\\n---\\\n\\\n## 7. Mental Model\\\n\\\nThink of it like **a library of heavily annotated scripts**:\\\n\\\n* **Series** = a **bookshelf**.\\\n* **Season** = a **book** on that shelf.\\\n* **Episode** = a **chapter** in the book.\\\n* **ScriptVersion** = different **drafts of that chapter**.\\\n* **Scenes** = **sections** of the chapter.\\\n* **Beats** = macro-level **sentences/turns** inside sections.\\\n* **Lines** = **individual sentences or actions** on the page.\\\n\\\nThen:\\\n\\\n* **Characters** = the **cast** that appears across the whole shelf.\\\n* **Locations** = the **sets/stages**.\\\n* **Tags** = the **sticky notes** you slap anywhere to track themes, arcs, motifs, or meta (Dramatica, astrology, whatever).\\\n\\\n---\\\n\\\n## 8. Example: Neon Genesis Evangelion vs Generation Kill\\\n\\\nUsing the same schema:\\\n\\\n* **Neon Genesis Evangelion**\\\n\\\n  * `series` row: `(\\\"Neon Genesis Evangelion\\\", \\\"anime\\\", 1995, 1996, ...)`\\\n  * `season`: single season row.\\\n  * `episode`: 26 rows with titles and air dates.\\\n  * `character`: Shinji, Rei, Asuka, Misato, Gendo, etc.\\\n  * `tag`: ‚ÄúInstrumentality‚Äù, ‚ÄúAngel fight‚Äù, ‚ÄúPsychic breakdown‚Äù.\\\n  * `scene/beat/line`: dialog-heavy introspection vs action beats tagged separately.\\\n\\\n* **Generation Kill**\\\n\\\n  * `series` row: `(\\\"Generation Kill\\\", \\\"miniseries\\\", 2008, 2008, ...)`\\\n  * `season`: single season row.\\\n  * `episode`: 7 rows.\\\n  * `character`: Wright, officers, squads.\\\n  * `location`: Kuwait, Iraqi cities, bases.\\\n  * `tag`: ‚ÄúLogistics failure‚Äù, ‚ÄúROE conflict‚Äù, ‚ÄúMoral injury‚Äù.\\\n  * `scene`: convoy sequences, firefights, downtime ‚Äî all using the same structural system as Evangelion.\\\n\\\nSame ERD, different shows. You just swap the data.\\\n\\\n```\\\n```\\\n\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":12173}]"
metadata_diff: {"new":{"id":"dd58771c79734264be96966f9766c3af","parent_id":"793df1757f2a47d19e5016f6c41e87e7","latitude":"30.43825590","longitude":"-84.28073290","altitude":"0.0000","author":"","source_url":"","is_todo":0,"todo_due":0,"todo_completed":0,"source":"joplin-desktop","source_application":"net.cozic.joplin-desktop","application_data":"","order":0,"markup_language":1,"is_shared":0,"share_id":"","conflict_original_id":"","master_key_id":"","user_data":"","deleted_time":0},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2025-11-26T03:19:14.482Z
created_time: 2025-11-26T03:19:14.482Z
type_: 13