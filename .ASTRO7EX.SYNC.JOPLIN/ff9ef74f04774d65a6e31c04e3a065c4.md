id: ff9ef74f04774d65a6e31c04e3a065c4
parent_id: 
item_type: 1
item_id: d8ccb13173494f7a8985d3fb58a61a5e
item_updated_time: 1764784801568
title_diff: "[{\"diffs\":[[1,\"üóÇÔ∏è ERD ‚Äî Atomic Astrology + Overlay Models\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":43}]"
body_diff: "[{\"diffs\":[[1,\"# üóÇÔ∏è ERD ‚Äî Atomic Astrology + Overlay Models\\\n\\\n---\\\n\\\n## üìë Table of Contents\\\n\\\n1. [Design Overview](#1-design-overview)\\\n2. [Core Entities ‚Äî Characters & Charts](#2-core-entities--characters--charts)  \\\n   - [2.1 CHARACTER](#21-character)  \\\n   - [2.2 CHART](#22-chart)\\\n3. [Astro Schema ‚Äî Domains, Subsystems, Atomic Variables](#3-astro-schema--domains-subsystems-atomic-variables)  \\\n   - [3.1 DOMAIN](#31-domain)  \\\n   - [3.2 SUBSYSTEM](#32-subsystem)  \\\n   - [3.3 ATOMIC_VARIABLE_DEF](#33-atomic_variable_def)  \\\n   - [3.4 ATOMIC_VALUE](#34-atomic_value)\\\n4. [Overlay Models ‚Äî Types, Dimensions, Profiles](#4-overlay-models--types-dimensions-profiles)  \\\n   - [4.1 OVERLAY_MODEL](#41-overlay_model)  \\\n   - [4.2 OVERLAY_MODEL_DIMENSION](#42-overlay_model_dimension)  \\\n   - [4.3 OVERLAY_MODEL_PROFILE](#43-overlay_model_profile)  \\\n   - [4.4 OVERLAY_MODEL_DIMENSION_VALUE](#44-overlay_model_dimension_value)\\\n5. [Linking Atomic Variables to Overlay Models](#5-linking-atomic-variables-to-overlay-models)  \\\n   - [5.1 ATOMIC_VARIABLE_OVERLAY](#51-atomic_variable_overlay)\\\n6. [ER Diagram (Mermaid)](#6-er-diagram-mermaid)\\\n7. [Usage Pattern](#7-usage-pattern)\\\n\\\n---\\\n\\\n## 1. Design Overview\\\n\\\nGoal: **store astrology-based atomic variables** for a character and then **deepen** them using reusable **overlay models** (Big Five, Enneagram, Attachment, Shadow, etc.).\\\n\\\nHigh level:\\\n\\\n- A **CHARACTER** has one or more **CHARTS**.\\\n- Each CHART has a set of **ATOMIC_VALUE** records (e.g. `SUN_IDENTITY_AXIS`, `MOON_NEED_CORE`, etc.), defined in **ATOMIC_VARIABLE_DEF**.\\\n- **DOMAIN** and **SUBSYSTEM** group the atomic variables (Identity, Emotional, Cognitive, etc.).\\\n- **OVERLAY_MODEL** (Big Five, Enneagram, Attachment, etc.) has **dimensions** (traits / sliders).\\\n- For each CHARACTER+MODEL, an **OVERLAY_MODEL_PROFILE** stores **dimension values**.\\\n- **ATOMIC_VARIABLE_OVERLAY** maps which overlay models are attached to which atomic variables (e.g. `SUN_EGO_STYLE` uses Big Five + Enneagram).\\\n\\\n---\\\n\\\n## 2. Core Entities ‚Äî Characters & Charts\\\n\\\n### 2.1 CHARACTER\\\n\\\n**Purpose:** One row per fictional person/entity.\\\n\\\n**Fields (example):**\\\n\\\n- `character_id` (PK)\\\n- `external_ref` (optional, link to other systems)\\\n- `name`\\\n- `status` (active, archived, etc.)\\\n- `notes`\\\n\\\n**Key relationships:**\\\n\\\n- `CHARACTER 1 ‚Äî N CHART`\\\n- `CHARACTER 1 ‚Äî N OVERLAY_MODEL_PROFILE`\\\n\\\n---\\\n\\\n### 2.2 CHART\\\n\\\n**Purpose:** One row per astrological chart (birth chart, event chart, etc.) tied to a character.\\\n\\\n**Fields:**\\\n\\\n- `chart_id` (PK)\\\n- `character_id` (FK ‚Üí CHARACTER)\\\n- `chart_type` (natal, progressed, composite, etc.)\\\n- `datetime_utc`\\\n- `location`\\\n- `system` (e.g. Tropical, Sidereal)\\\n- `notes`\\\n\\\n**Key relationships:**\\\n\\\n- `CHART 1 ‚Äî N ATOMIC_VALUE`\\\n- `CHARACTER 1 ‚Äî N CHART`\\\n\\\n---\\\n\\\n## 3. Astro Schema ‚Äî Domains, Subsystems, Atomic Variables\\\n\\\n### 3.1 DOMAIN\\\n\\\n**Purpose:** High-level grouping by functional area.\\\n\\\nExamples: `Identity`, `Emotional`, `Cognitive`, `Relational`, `Action`, `Growth`, `Shadow`, `Social`, `Global`.\\\n\\\n**Fields:**\\\n\\\n- `domain_id` (PK)\\\n- `domain_code` (e.g. `IDENTITY`, `EMOTIONAL`)\\\n- `name`\\\n- `description`\\\n\\\n**Key relationships:**\\\n\\\n- `DOMAIN 1 ‚Äî N SUBSYSTEM`\\\n- `DOMAIN 1 ‚Äî N OVERLAY_MODEL` (preferred domain for a model)\\\n\\\n---\\\n\\\n### 3.2 SUBSYSTEM\\\n\\\n**Purpose:** Astrological subsystem slice (Sun, Moon, Mercury, Houses, Aspects, etc.).\\\n\\\nExamples: `SUN`, `MOON`, `ASC`, `VENUS`, `MARS`, `HOUSES`, `ASPECTS`, `NODES`, etc.\\\n\\\n**Fields:**\\\n\\\n- `subsystem_id` (PK)\\\n- `domain_id` (FK ‚Üí DOMAIN)\\\n- `subsystem_code` (e.g. `SUN`, `MOON`, `MERCURY`, `H5`, `ASPECT_GENERAL`)\\\n- `name`\\\n- `description`\\\n\\\n**Key relationships:**\\\n\\\n- `SUBSYSTEM 1 ‚Äî N ATOMIC_VARIABLE_DEF`\\\n- `DOMAIN 1 ‚Äî N SUBSYSTEM`\\\n\\\n---\\\n\\\n### 3.3 ATOMIC_VARIABLE_DEF\\\n\\\n**Purpose:** The definition of each atomic variable (what you listed: `SUN_IDENTITY_AXIS`, `MOON_NEED_CORE`, etc.).\\\n\\\n**Fields:**\\\n\\\n- `atomic_var_id` (PK)\\\n- `subsystem_id` (FK ‚Üí SUBSYSTEM)\\\n- `var_code` (e.g. `SUN_IDENTITY_AXIS`, `MOON_NEED_CORE`)\\\n- `name` (human-readable label)\\\n- `description` (what this variable means)\\\n- `data_type` (text, enum, numeric, JSON)\\\n- `applies_to_level` (character, narrative, both)\\\n- `is_core` (boolean, marks important ones)\\\n\\\n**Key relationships:**\\\n\\\n- `SUBSYSTEM 1 ‚Äî N ATOMIC_VARIABLE_DEF`\\\n- `ATOMIC_VARIABLE_DEF 1 ‚Äî N ATOMIC_VALUE`\\\n- `ATOMIC_VARIABLE_DEF 1 ‚Äî N ATOMIC_VARIABLE_OVERLAY`\\\n\\\n---\\\n\\\n### 3.4 ATOMIC_VALUE\\\n\\\n**Purpose:** Actual value of each atomic variable for a specific chart (i.e., per character-instance).\\\n\\\n**Fields:**\\\n\\\n- `chart_id` (FK ‚Üí CHART)\\\n- `atomic_var_id` (FK ‚Üí ATOMIC_VARIABLE_DEF)\\\n- `value_text` (for categorical / descriptive values)\\\n- `value_numeric` (for scores)\\\n- `value_json` (for structured subdata if needed)\\\n- `source` (manual, AI, rule engine, etc.)\\\n- `last_updated`\\\n\\\n**Primary key (recommended):**\\\n\\\n- Composite: `(chart_id, atomic_var_id)`\\\n\\\n**Key relationships:**\\\n\\\n- `CHART 1 ‚Äî N ATOMIC_VALUE`\\\n- `ATOMIC_VARIABLE_DEF 1 ‚Äî N ATOMIC_VALUE`\\\n\\\n---\\\n\\\n## 4. Overlay Models ‚Äî Types, Dimensions, Profiles\\\n\\\n### 4.1 OVERLAY_MODEL\\\n\\\n**Purpose:** External psychological / narrative model (Big Five, Enneagram, Attachment, Shadow, etc.).\\\n\\\n**Fields:**\\\n\\\n- `model_id` (PK)\\\n- `domain_id` (FK ‚Üí DOMAIN, primary functional domain)\\\n- `model_code` (e.g. `BIG_FIVE`, `ENNEAGRAM`, `ATTACHMENT`, `SHADOW`, `IFS`)\\\n- `name`\\\n- `description`\\\n- `model_type` (trait, typology, arc, etc.)\\\n\\\n**Key relationships:**\\\n\\\n- `OVERLAY_MODEL 1 ‚Äî N OVERLAY_MODEL_DIMENSION`\\\n- `OVERLAY_MODEL 1 ‚Äî N OVERLAY_MODEL_PROFILE`\\\n- `OVERLAY_MODEL 1 ‚Äî N ATOMIC_VARIABLE_OVERLAY`\\\n- `DOMAIN 1 ‚Äî N OVERLAY_MODEL`\\\n\\\n---\\\n\\\n### 4.2 OVERLAY_MODEL_DIMENSION\\\n\\\n**Purpose:** A named dimension or component inside a model.\\\n\\\nExamples:\\\n\\\n- Big Five ‚Üí `OPENNESS`, `CONSCIENTIOUSNESS`, `EXTRAVERSION`, `AGREEABLENESS`, `NEUROTICISM`\\\n- Attachment ‚Üí `STYLE`\\\n- Enneagram ‚Üí `TYPE`, `WING`\\\n- Grit ‚Üí `GRIT_SCORE`\\\n\\\n**Fields:**\\\n\\\n- `dimension_id` (PK)\\\n- `model_id` (FK ‚Üí OVERLAY_MODEL)\\\n- `dimension_code` (e.g. `O`, `C`, `E`, `A`, `N`, `ATTACHMENT_STYLE`)\\\n- `name`\\\n- `data_type` (numeric, enum, text)\\\n- `min_value` / `max_value` (optional for numeric)\\\n- `enum_options` (optional; JSON list for categorical)\\\n\\\n**Key relationships:**\\\n\\\n- `OVERLAY_MODEL 1 ‚Äî N OVERLAY_MODEL_DIMENSION`\\\n- `OVERLAY_MODEL_DIMENSION 1 ‚Äî N OVERLAY_MODEL_DIMENSION_VALUE`\\\n\\\n---\\\n\\\n### 4.3 OVERLAY_MODEL_PROFILE\\\n\\\n**Purpose:** A character‚Äôs specific profile for one overlay model.\\\n\\\nExamples:\\\n\\\n- ‚ÄúVivian ‚Äî Big Five‚Äù\\\n- ‚ÄúVivian ‚Äî Enneagram‚Äù\\\n- ‚ÄúVivian ‚Äî Attachment‚Äù\\\n\\\n**Fields:**\\\n\\\n- `profile_id` (PK)\\\n- `character_id` (FK ‚Üí CHARACTER)\\\n- `chart_id` (nullable FK ‚Üí CHART; optional if profile is chart-specific)\\\n- `model_id` (FK ‚Üí OVERLAY_MODEL)\\\n- `profile_label` (e.g. `NATAL_DEFAULT`, `ARC_01`)\\\n- `notes`\\\n- `last_updated`\\\n\\\n**Uniqueness suggestion:**\\\n\\\n- `(character_id, chart_id, model_id, profile_label)` should be unique.\\\n\\\n**Key relationships:**\\\n\\\n- `CHARACTER 1 ‚Äî N OVERLAY_MODEL_PROFILE`\\\n- `CHART 1 ‚Äî N OVERLAY_MODEL_PROFILE` (optional)\\\n- `OVERLAY_MODEL 1 ‚Äî N OVERLAY_MODEL_PROFILE`\\\n- `OVERLAY_MODEL_PROFILE 1 ‚Äî N OVERLAY_MODEL_DIMENSION_VALUE`\\\n\\\n---\\\n\\\n### 4.4 OVERLAY_MODEL_DIMENSION_VALUE\\\n\\\n**Purpose:** Actual score/value for a given dimension in a character‚Äôs model profile.\\\n\\\n**Fields:**\\\n\\\n- `profile_id` (FK ‚Üí OVERLAY_MODEL_PROFILE)\\\n- `dimension_id` (FK ‚Üí OVERLAY_MODEL_DIMENSION)\\\n- `value_numeric` (for scores, 0‚Äì100 etc.)\\\n- `value_text` (for labels like `Anxious-Avoidant`, `Type 3w4`)\\\n- `value_json` (optional complex data)\\\n- `confidence` (optional, 0‚Äì1)\\\n- `source` (manual, AI, etc.)\\\n- `last_updated`\\\n\\\n**Primary key (recommended):**\\\n\\\n- Composite: `(profile_id, dimension_id)`\\\n\\\n**Key relationships:**\\\n\\\n- `OVERLAY_MODEL_PROFILE 1 ‚Äî N OVERLAY_MODEL_DIMENSION_VALUE`\\\n- `OVERLAY_MODEL_DIMENSION 1 ‚Äî N OVERLAY_MODEL_DIMENSION_VALUE`\\\n\\\n---\\\n\\\n## 5. Linking Atomic Variables to Overlay Models\\\n\\\n### 5.1 ATOMIC_VARIABLE_OVERLAY\\\n\\\n**Purpose:** Connects **which models** are used to deepen **which atomic variables** (e.g. `SUN_EGO_STYLE` ‚Üê Big Five + Enneagram).\\\n\\\n**Fields:**\\\n\\\n- `atomic_var_id` (FK ‚Üí ATOMIC_VARIABLE_DEF)\\\n- `model_id` (FK ‚Üí OVERLAY_MODEL)\\\n- `role` (e.g. `PRIMARY`, `SECONDARY`, `SUPPORTING`)\\\n- `weight` (numeric, e.g. 1.0, 0.5 for influence priority)\\\n- `notes`\\\n\\\n**Primary key:**\\\n\\\n- Composite: `(atomic_var_id, model_id)`\\\n\\\n**Key relationships:**\\\n\\\n- `ATOMIC_VARIABLE_DEF 1 ‚Äî N ATOMIC_VARIABLE_OVERLAY`\\\n- `OVERLAY_MODEL 1 ‚Äî N ATOMIC_VARIABLE_OVERLAY`\\\n\\\n---\\\n\\\n## 6. ER Diagram (Mermaid)\\\n\\\n```mermaid\\\nerDiagram\\\n\\\n    CHARACTER ||--o{ CHART : has\\\n    CHARACTER ||--o{ OVERLAY_MODEL_PROFILE : \\\"has profile\\\"\\\n    CHART ||--o{ ATOMIC_VALUE : \\\"includes\\\"\\\n    CHART ||--o{ OVERLAY_MODEL_PROFILE : \\\"context for\\\"\\\n\\\n    DOMAIN ||--o{ SUBSYSTEM : groups\\\n    DOMAIN ||--o{ OVERLAY_MODEL : \\\"primary domain\\\"\\\n    SUBSYSTEM ||--o{ ATOMIC_VARIABLE_DEF : contains\\\n    ATOMIC_VARIABLE_DEF ||--o{ ATOMIC_VALUE : \\\"valued as\\\"\\\n\\\n    OVERLAY_MODEL ||--o{ OVERLAY_MODEL_DIMENSION : defines\\\n    OVERLAY_MODEL ||--o{ OVERLAY_MODEL_PROFILE : \\\"used by\\\"\\\n    OVERLAY_MODEL_PROFILE ||--o{ OVERLAY_MODEL_DIMENSION_VALUE : \\\"assigns\\\"\\\n\\\n    OVERLAY_MODEL_DIMENSION ||--o{ OVERLAY_MODEL_DIMENSION_VALUE : \\\"dimension of\\\"\\\n\\\n    ATOMIC_VARIABLE_DEF ||--o{ ATOMIC_VARIABLE_OVERLAY : \\\"is enriched by\\\"\\\n    OVERLAY_MODEL ||--o{ ATOMIC_VARIABLE_OVERLAY : \\\"enriches\\\"\\\n\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":9139}]"
metadata_diff: {"new":{"id":"d8ccb13173494f7a8985d3fb58a61a5e","parent_id":"1bee78f443a94558b4a4b89a9f2e81f9","latitude":"30.43825590","longitude":"-84.28073290","altitude":"0.0000","author":"","source_url":"","is_todo":0,"todo_due":0,"todo_completed":0,"source":"joplin-desktop","source_application":"net.cozic.joplin-desktop","application_data":"","order":0,"markup_language":1,"is_shared":0,"share_id":"","conflict_original_id":"","master_key_id":"","user_data":"","deleted_time":0},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2025-12-03T18:05:29.547Z
created_time: 2025-12-03T18:05:29.547Z
type_: 13