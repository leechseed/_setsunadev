id: 43ae65a4d96a4149ad81b41a958a81d7
parent_id: ef08738d5456430fbe3473501591b249
item_type: 1
item_id: 4a443d7f01e04c86b5da4b65f019695f
item_updated_time: 1759780690114
title_diff: "[{\"diffs\":[[0,\"S\"],[-1,\"LIME VR\"],[1,\"limeVR Body (10× ICM-45686) + ARKit Face FULL BUILD GUIDE\"]],\"start1\":0,\"start2\":0,\"length1\":8,\"length2\":58}]"
body_diff: "[{\"diffs\":[[-1,\"SLIME VR\\\n\\\nHere’s a **complete, field-tested parts list** to power and run **one SlimeVR node** based on your\\\n**ESP32-S3-DevKitC-1-N8R2 + BNO085 (SPI)** setup — self-contained, rechargeable, robust enough for body-mounting.\\\n\\\n---\\\n\\\n# ⚙️ Bill of Materials – 1 SlimeVR Node (ESP32-S3-DevKitC-1-N8R2)\\\n\\\n| Category                | Item                                                          | Example / Notes                                                            |       Qty |\\\n| ----------------------- | ------------------------------------------------------------- | -------------------------------------------------------------------------- | --------: |\\\n| **Core MCU**            | **ESP32-S3-DevKitC-1-N8R2**                                   | Your main board. Dual-core, 8 MB flash, 2 MB PSRAM.                        |         1 |\\\n| **IMU**                 | **BNO085** (SPI breakout)                                     | Adafruit or SparkFun; ensure pins: **VCC, GND, SCK, MISO, MOSI, CS, INT**. |         1 |\\\n| **Power Source**        | **LiPo Battery 3.7 V (750–1000 mAh, JST-PH 2.0)**             | Provides ~5–8 h runtime.                                                   |         1 |\\\n| **Charger Module**      | **TP4056 Li-Ion charger** *(with protection IC)*              | 5 V micro-USB or Type-C input; **OUT+ / OUT-** go to boost.                |         1 |\\\n| **Boost Converter**     | **MT3608 5 V step-up** module                                 | Boosts 3.7 V → 5 V; set output to 5.0 V before wiring.                     |         1 |\\\n| **Power Switch**        | Mini slide switch (rated ≥ 500 mA @ 5 V)                      | Inline between boost output and ESP32 5V pin.                              |         1 |\\\n| **Wiring / Connectors** | 26–28 AWG silicone wire (red/black) + JST-PH male/female pair | For LiPo & power harness.                                                  | as needed |\\\n| **Mount Hardware**      | M2 brass standoffs (4–6 mm) + screws                          | Secure DevKit to case or perfboard plate.                                  |         4 |\\\n| **Case / Mount Plate**  | 3D-printed PETG case or perfboard plate                       | Isolate PCB, mark UP/FWD.                                                  |         1 |\\\n| **Misc. Electronics**   | 0.1 µF ceramic cap (close to IMU VCC/GND)                     | Decoupling / noise suppression.                                            |         1 |\\\n|                         | Heat-shrink tubing, zip ties                                  | Strain relief & safety.                                                    |         — |\\\n\\\n---\\\n\\\n# 🔌 Wiring Summary\\\n\\\n```\\\n[LiPo 3.7V]\\\n   │\\\n   └─> TP4056 Charger IN (B+) / GND (B−)\\\n          OUT+ / OUT−\\\n              │\\\n              └─> MT3608 Boost (VIN+/−)\\\n                       │\\\n                       └─> 5.0 V OUT ──[Slide SW]──► ESP32 5V pin\\\n                            GND ─────────► ESP32 GND\\\nESP32 3V3 ─► IMU VCC\\\nESP32 GND ─► IMU GND\\\nESP32 18/23/19/5 → IMU SCK/MOSI/MISO/CS\\\nESP32 4 (optional) → IMU INT\\\n```\\\n\\\n**Charging:** plug USB into the TP4056 (not the ESP32).\\\n**Debugging/programming:** plug USB-C into ESP32 (disconnect LiPo or power off switch).\\\n\\\n---\\\n\\\n# ⚡ Electrical Notes\\\n\\\n* **Do not power both USB-C and boost 5 V at the same time** unless you add a diode or ideal-diode OR board.\\\n* Verify boost output is **5.0 ± 0.1 V** before connecting.\\\n* Power the IMU strictly from **3.3 V** (ESP32 3V3 pin).\\\n* Keep IMU leads < 10 cm; twist power & ground if possible.\\\n* Add the 0.1 µF cap between VCC and GND on the IMU breakout.\\\n\\\n---\\\n\\\n# 🔋 Runtime Estimate\\\n\\\n| Battery  | Avg Current ≈ 120 mA | Runtime |\\\n| -------- | -------------------: | ------: |\\\n| 750 mAh  |                 ~6 h |         |\\\n| 1000 mAh |                 ~8 h |         |\\\n| 1500 mAh |                ~12 h |         |\\\n\\\n---\\\n\\\n# 🧰 Optional Upgrades\\\n\\\n* **Power mux board** (ideal-diode, e.g., LM66100 module) → safely auto-switch between USB and battery.\\\n* **Tiny OLED** (SSD1306 I²C) for debug telemetry.\\\n* **XT30 / JST locking connectors** for quick-swap LiPos.\\\n* **Printed strain-relief bar** over JSTs inside case.\\\n\\\n---\\\n\\\nWould you like a follow-up **wiring diagram (Mermaid or Fritzing-style)** showing the exact LiPo → charger → boost → ESP32 → IMU flow for copy-paste into your build notes?\"],[1,\"# 🧭 Full Build Guide — SlimeVR Body (10× ICM-45686) + ARKit Face\\\n\\\n> **Scope:** Complete **hardware + firmware + network + workflow** for a **10-node SlimeVR** suit using **ESP32-S3-DevKitC-1** and **ICM-45686** IMUs, plus **ARKit facial capture** (iPhone TrueDepth).\\\n> **Position tracking:** none (IMU rotations only). **Face:** ARKit blendshapes.\\\n> **Tone:** straight facts; no mystery meat.\\\n\\\n---\\\n\\\n## Table of Contents\\\n\\\n1. [System Overview](#system-overview)\\\n2. [What Each Part Owns](#what-each-part-owns)\\\n3. [Bill of Materials](#bill-of-materials)\\\n\\\n   * 3.1 [Per-Node BOM (x1)](#per-node-bom-x1)\\\n   * 3.2 [Fleet BOM (x10)](#fleet-bom-x10)\\\n   * 3.3 [Tools & Printables](#tools--printables)\\\n4. [Electronics & Wiring](#electronics--wiring)\\\n\\\n   * 4.1 [Power Topology](#power-topology)\\\n   * 4.2 [ESP32-S3 ⇄ ICM-45686 (SPI)](#esp32s3--icm45686-spi)\\\n   * 4.3 [ESP32-S3 ⇄ ICM-45686 (I²C alternative)](#esp32s3--icm45686-i²c-alternative)\\\n5. [Firmware & Config](#firmware--config)\\\n6. [Networking (must-do)](#networking-mustdo)\\\n7. [Enclosures & Mounting](#enclosures--mounting)\\\n8. [ARKit Face Setup](#arkit-face-setup)\\\n9. [Session Workflow](#session-workflow)\\\n10. [Troubleshooting](#troubleshooting)\\\n11. [Maintenance & Safety](#maintenance--safety)\\\n12. [Appendix A — Cost Reality](#appendix-a--cost-reality)\\\n13. [Appendix B — Checklists](#appendix-b--checklists)\\\n\\\n---\\\n\\\n## 1) System Overview\\\n\\\n```mermaid\\\nflowchart LR\\\n  subgraph Wearer\\\n    N[10× IMU Nodes\\\\\nESP32-S3 + ICM-45686]\\\n    P[iPhone TrueDepth\\\\\nARKit Face]\\\n  end\\\n\\\n  N -- UDP 2.4 GHz --> S[SlimeVR Server (PC)]\\\n  P -- 5 GHz/Wi-Fi --> F[Face Receiver (Live Link/OSC)]\\\n\\\n  S -- Body quats --> E[Engine (Unreal/Unity/Blender)]\\\n  F -- Blendshapes --> E\\\n  E --> R[Character Rig\\\\\n(Retarget + Facial Rig)]\\\n```\\\n\\\n* **Body:** IMUs stream **quaternions** at 100–200 Hz → SlimeVR Server → Engine.\\\n* **Face:** iPhone streams **ARKit blendshapes** (and *optional* head pose) → Engine.\\\n\\\n---\\\n\\\n## 2) What Each Part Owns\\\n\\\n| Subsystem         | Owns                        | Notes                                          |\\\n| ----------------- | --------------------------- | ---------------------------------------------- |\\\n| **SlimeVR nodes** | **All body bone rotations** | Root/feet position are IK; expect some skate.  |\\\n| **ARKit**         | **Facial blendshapes**      | Disable ARKit head pose if it fights head IMU. |\\\n| **Engine**        | **IK, retarget, export**    | One rig. Keep bone names/axes consistent.      |\\\n\\\n**Head rule:** head **IMU** dictates head rotation. **ARKit** only drives face shapes (local offsets).\\\n\\\n---\\\n\\\n## 3) Bill of Materials\\\n\\\n### 3.1 Per-Node BOM (x1)\\\n\\\n| Category    | Item                                          | Notes                                                                                   |\\\n| ----------- | --------------------------------------------- | --------------------------------------------------------------------------------------- |\\\n| **MCU**     | **ESP32-S3-DevKitC-1-N8R2**                   | Native USB, 8 MB flash, 2 MB PSRAM.                                                     |\\\n| **IMU**     | **ICM-45686** breakout                        | Get SPI-capable board; exposes VCC, GND, SCK, MOSI, MISO, CS, INT (or SCL/SDA for I²C). |\\\n| **Battery** | LiPo **3.7 V 750–1000 mAh** (JST-PH 2.0)      | 6–10 h typical.                                                                         |\\\n| **Charger** | **TP4056** Li-ion charger **with protection** | IN via USB; OUT+ / OUT- to boost.                                                       |\\\n| **Boost**   | **MT3608** 5.0 V step-up                      | Trim to **5.0 V** before connecting.                                                    |\\\n| **Switch**  | Mini slide switch (≥500 mA @ 5 V)             | Inline between boost and DevKit **5V**.                                                 |\\\n| **Wiring**  | 26–28 AWG silicone; JST-PH pigtails           | Battery & power harness.                                                                |\\\n| **Mount**   | M2 standoffs + screws                         | Rigid mounting to case/plate.                                                           |\\\n| **Case**    | 3D-printed PETG/ABS                           | Mark **UP/FWD** on lid.                                                                 |\\\n| **Cap**     | **0.1 µF** ceramic at IMU VCC/GND             | Decoupling for power cleanliness.                                                       |\\\n\\\n> **Alt power (prototype):** USB power bank → DevKit USB-C. Bulky, but fast to bring up.\\\n\\\n### 3.2 Fleet BOM (x10)\\\n\\\n* **ESP32-S3-DevKitC-1-N8R2** ×10\\\n* **ICM-45686** breakout ×10\\\n* **LiPo 750–1000 mAh** ×10 + **spares 2–4**\\\n* **TP4056 (with protection)** ×10\\\n* **MT3608** ×10\\\n* Mini slide switch ×10\\\n* M2 standoffs/screws kit (assortment)\\\n* PETG/ABS filament (cases)\\\n* **Router/AP** with solid 2.4 GHz + 5 GHz (see Networking)\\\n* Multi-port USB-C charger (6–12 ports) + short cables\\\n* Labels (HIPS, CHEST, HEAD, etc.), storage bins\\\n\\\n### 3.3 Tools & Printables\\\n\\\n* Fine-tip soldering iron, 63/37 solder, flux, heat-shrink\\\n* Precision drivers, flush cutters, tweezers\\\n* Perfboard **or** printed internal plate for strain relief\\\n* SlimeVR tracker case STLs (or your own)\\\n\\\n---\\\n\\\n## 4) Electronics & Wiring\\\n\\\n### 4.1 Power Topology\\\n\\\n```text\\\n[LiPo 3.7 V]\\\n   │\\\n   └─> [TP4056 Charger (with protection)]\\\n           OUT+ / OUT−\\\n              │\\\n              └─> [MT3608 Boost 5.0 V] ── [Slide SW] ──> ESP32 5V pin\\\n                                        GND ───────────> ESP32 GND\\\nESP32 3V3  ─────────> IMU VCC\\\nESP32 GND  ─────────> IMU GND\\\n```\\\n\\\n* **Do NOT** feed raw LiPo into 5V.\\\n* **Do NOT** power via USB **and** external 5 V at the same time (unless you add diode OR / ideal-diode mux).\\\n* Keep boost module **physically away** from the IMU to minimize switching noise coupling.\\\n\\\n### 4.2 ESP32-S3 ⇄ ICM-45686 (SPI)\\\n\\\n| ICM-45686 | ESP32-S3 (example) | Note          |\\\n| --------- | ------------------ | ------------- |\\\n| VCC       | 3V3                | 3.3 V only    |\\\n| GND       | GND                | Common ground |\\\n| **SCK**   | **GPIO 18**        | SPI clock     |\\\n| **MOSI**  | **GPIO 11**        | Master out    |\\\n| **MISO**  | **GPIO 13**        | Master in     |\\\n| **CS**    | **GPIO 10**        | Chip select   |\\\n| INT       | GPIO 9 (optional)  | Data-ready    |\\\n\\\n> SPI = **lower jitter**, better timing at 100–200 Hz.\\\n\\\n### 4.3 ESP32-S3 ⇄ ICM-45686 (I²C alternative)\\\n\\\n| ICM-45686 | ESP32-S3          | Note      |\\\n| --------- | ----------------- | --------- |\\\n| VCC       | 3V3               |           |\\\n| GND       | GND               |           |\\\n| **SCL**   | **GPIO 22**       | I²C clock |\\\n| **SDA**   | **GPIO 21**       | I²C data  |\\\n| INT       | GPIO 4 (optional) |           |\\\n\\\n> Keep I²C wires **<10 cm**. Use **4.7 kΩ pull-ups** if the breakout doesn’t include them.\\\n\\\n---\\\n\\\n## 5) Firmware & Config\\\n\\\n* **Firmware:** SlimeVR Tracker Firmware **0.7.x+** (or current).\\\n* **Target board:** ESP32-S3 (Arduino/PlatformIO).\\\n* **IMU type:** **ICM-45686**.\\\n* **Fusion:** **VQF** (gyro+accel). **Magnetometer OFF** indoors.\\\n* **Rate:** **100–200 Hz** output quaternions.\\\n* **Transport:** **UDP over 2.4 GHz Wi-Fi**.\\\n* **Node IDs:** Hard-code names matching mount (HIPS, CHEST, HEAD, UARM_L, …).\\\n\\\nExample PlatformIO (works for many DevKitC-1 variants):\\\n\\\n```ini\\\n[env:esp32s3]\\\nplatform = espressif32\\\nboard = esp32-s3-devkitc-1\\\nframework = arduino\\\nboard_build.flash_size = 8MB\\\nboard_build.psram = enabled\\\nbuild_flags =\\\n  -D ARDUINO_USB_CDC_ON_BOOT=1\\\nmonitor_speed = 115200\\\nupload_speed = 921600\\\n```\\\n\\\n---\\\n\\\n## 6) Networking (must-do)\\\n\\\n* **ESP32 = 2.4 GHz only.**\\\n* Create **two SSIDs** on the same LAN/VLAN:\\\n\\\n  * `suit-2g` → **2.4 GHz only** (trackers)\\\n  * `studio-5g` → **5 GHz only** (iPhone ARKit)\\\n* **PC on Ethernet** to the same router/AP.\\\n\\\n**2.4 GHz settings (trackers):**\\\n\\\n* Channel **1/6/11** (pick quietest).\\\n* **20 MHz** width.\\\n* WPA2-PSK (no WPA3-only).\\\n* Disable band-steering/“Smart Connect”.\\\n\\\n**5 GHz (phone):**\\\n\\\n* Non-DFS channel (36/40/44/48) to avoid radar channel hops.\\\n* 80 MHz width is fine.\\\n\\\nOptional: give PC and nodes **DHCP reservations**.\\\n\\\n---\\\n\\\n## 7) Enclosures & Mounting\\\n\\\n* **Rigid** case. No wobble.\\\n* **Mark axes** on lids (**UP** arrow, **FWD** arrow).\\\n* **M2 standoffs** in case; don’t let boards touch plastic ribs or screws.\\\n* **Cable strain relief** for JST and USB-C.\\\n* **Battery pocket** or strap inside case; insulate the LiPo.\\\n* **Node placement (10):** HIPS, LOWER_SPINE, CHEST, HEAD, UARM_L/R, FOREARM_L/R, FOOT_L/R.\\\n\\\n---\\\n\\\n## 8) ARKit Face Setup\\\n\\\n* **Device:** any FaceID iPhone (X or newer).\\\n* **App:** Live Link Face (Unreal) or an OSC/UDP face streamer (Unity/Blender).\\\n* **Network:** join `studio-5g`.\\\n* **Engine mapping:**\\\n\\\n  * Use **head IMU** for head rotation.\\\n  * Apply ARKit **blendshapes** to facial rig (disable ARKit head pose if it double-drives).\\\n\\\n---\\\n\\\n## 9) Session Workflow\\\n\\\n1. **Power on; warm up 60–120 s.**\\\n2. Launch **SlimeVR Server**; confirm 10 trackers online.\\\n3. Strap nodes (same spots, same orientation).\\\n4. **T-pose alignment** in SlimeVR; verify elbow/knee bend directions.\\\n5. Start ARKit app; confirm blendshapes; ensure head pose is **off** (if conflicting).\\\n6. **Walk/arm-swing test**; let **stillness rebias** settle when idle.\\\n7. Record (raw optional) + final animation in engine.\\\n8. Between takes: short idle lets rebias tame yaw drift. Long breaks: power cycle.\\\n\\\n---\\\n\\\n## 10) Troubleshooting\\\n\\\n| Symptom            | Cause                     | Fix                                                           |\\\n| ------------------ | ------------------------- | ------------------------------------------------------------- |\\\n| Slow yaw drift     | Gyro bias, mag off        | Let stillness rebias; keep takes sane; power-cycle if needed. |\\\n| Stutter/lag        | Wi-Fi congestion          | Lock 2.4 GHz to 1/6/11 @ 20 MHz; wire PC; drop to 100 Hz.     |\\\n| One limb reversed  | Wrong mount orientation   | Re-do mounting; fix axis mapping; mark lids clearly.          |\\\n| Noisy/jumpy        | Loose strap / power noise | Tighten, shorten leads, add 0.1 µF at IMU, move boost away.   |\\\n| Head fights face   | Double-driven             | IMU owns head rot; ARKit shapes only.                         |\\\n| Random disconnects | Weak router / bad channel | New AP or different channel; give DHCP reservations.          |\\\n\\\n---\\\n\\\n## 11) Maintenance & Safety\\\n\\\n* **LiPo:** replace yearly under heavy use; store ~50% if shelved weeks.\\\n* Inspect straps, JSTs, and case screws **weekly**.\\\n* Keep IMUs **away from magnets** (headphones, buck inductors).\\\n* Don’t crush or crease LiPo; retire any pack that swells or sags.\\\n\\\n---\\\n\\\n## 12) Appendix A — Cost Reality\\\n\\\n**Per node:** ~$45–$70 in parts (DevKitC-1, ICM-45686, LiPo + power path, case).\\\n**10 nodes:** ~$450–$700 for nodes + ~$90–$180 shared gear (router/AP, charger, labels) → **~$540–$880 total** (you already own PC/iPhone).\\\n\\\n---\\\n\\\n## 13) Appendix B — Checklists\\\n\\\n**Build (per node)**\\\n\\\n* [ ] ESP32-S3 mounted on M2 standoffs\\\n* [ ] ICM-45686 wired (SPI preferred) + 0.1 µF cap\\\n* [ ] LiPo → TP4056 → MT3608 (5.0 V set) → switch → ESP32 5V\\\n* [ ] ESP32 3V3 → IMU VCC; common GND\\\n* [ ] Firmware flashed; ID set; 100–200 Hz; VQF fusion\\\n* [ ] Case closed; UP/FWD arrows visible\\\n\\\n**Session**\\\n\\\n* [ ] Trackers charged; router on; PC wired Ethernet\\\n* [ ] Nodes on `suit-2g`; phone on `studio-5g`\\\n* [ ] SlimeVR Server sees 10 nodes\\\n* [ ] T-pose alignment ok\\\n* [ ] ARKit blendshapes streaming; head pose not fighting\\\n* [ ] Quick walk test; stillness rebias confirmed\\\n* [ ] Record\\\n\\\n---\\\n\\\n### Bottom Line\\\n\\\n* Use **ICM-45686** + **ESP32-S3**.\\\n* **SPI**, short leads, rigid cases.\\\n* **Dedicated 2.4 GHz** for trackers, **5 GHz** for iPhone, **Ethernet** for PC.\\\n* **Mag OFF** indoors; rely on **VQF + stillness rebias**.\\\n* Keep it consistent and you’ll get **clean, portable body rotations** and **great facial capture** with minimal drama.\"],[0,\"\\\n\"]],\"start1\":0,\"start2\":0,\"length1\":4331,\"length2\":11902}]"
metadata_diff: {"new":{},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2025-10-06T20:04:44.151Z
created_time: 2025-10-06T20:04:44.151Z
type_: 13